{% import "components/form.html" as form with context %}
{% import "components/sidemenu.html" as sidemenu with context %}
{% import "components/paginator.html" as paginator with context %}
{% import "components/nothing.html" as nothing with context %}
{% import "components/noscript_note.html" as noscript_note with context %}
{% import "components/user.html" as user with context %}
<!DOCTYPE html>
<html data-page="{{ page_name }}" data-layout="{{ layout_name }}" data-theme="{{ (handler.user|default({})).theme|default('light') }}" class="layout--{{ layout_name }} page--{{ page_name }} theme--{{ (handler.user|default({})).theme|default('light') }}" lang="{{ UserContext.viewLang }}" data-app="Hydro">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="chrome=1"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1" />

  <link rel="apple-touch-icon" sizes="180x180" href="{{ UiContext.cdn_prefix }}apple-touch-icon-180x180.png">
  <link rel="icon" type="image/png" href="{{ UiContext.cdn_prefix }}favicon-32x32.png" sizes="32x32">
  <link rel="icon" type="image/png" href="{{ UiContext.cdn_prefix }}android-chrome-192x192.png" sizes="192x192">
  <link rel="icon" type="image/png" href="{{ UiContext.cdn_prefix }}favicon-96x96.png" sizes="96x96">
  <link rel="icon" type="image/png" href="{{ UiContext.cdn_prefix }}favicon-16x16.png" sizes="16x16">
  {% if handler.context.request.url %}<link rel="canonical" href="{{ model.system.get('server.url') }}{{ handler.context.request.url.substring(1) }}">{% endif %}
  <meta name="theme-color" content="#56758f">
  {% block ogp_site %}
  <meta property="og:site_name" content="{{ (handler.domain|default({ui:[]})).ui.name|default(model.system.get('server.name')) }}" />
  <meta property="og:url" content="{{ model.system.get('server.url') }}{{ handler.request.path.slice(1) }}" />
  <meta property="og:image" content="{{ UiContext.cdn_prefix }}favicon-96x96.png" />
  {% endblock %}
  {% block ogp %}
  <meta property="og:title" content="{{ handler.renderTitle(page_name) }}" />
  {% endblock %}
  <title>{{ handler.renderTitle(page_name) }}</title>
  <style>
    body {
      --font-family: "{{ UserContext.fontFamily }}", "Open Sans", "Seravek", "Segoe UI", "Verdana", "PingFang SC", "Hiragino Sans GB", "Lantinghei SC", "Microsoft Yahei", "WenQuanYi Micro Hei", "sans";
      --code-font-family: "{{ UserContext.codeFontFamily }}", "monaco", "Source Code Pro", "Consolas", "Lucida Console", "monospace";
      --font-ligatures: {{ "normal" if UserContext.codeFontLigatures else "none" }} !important;
      font-family: var(--font-family);
    }
    
    /* Custom DaisyUI theme overrides */
    [data-theme="light"] {
      --primary: oklch(49.12% 0.3096 275.75);
      --primary-content: oklch(100% 0 0);
      --secondary: oklch(69.71% 0.329 342.55);
      --secondary-content: oklch(100% 0 0);
      --accent: oklch(76.76% 0.184 183.61);
      --neutral: oklch(30% 0.02 285);
      --base-100: oklch(100% 0 0);
      --base-200: oklch(96% 0 0);
      --base-300: oklch(94% 0 0);
      --base-content: oklch(20% 0.02 285);
    }
    
    [data-theme="dark"] {
      --primary: oklch(65.69% 0.196 275.75);
      --primary-content: oklch(100% 0 0);
      --secondary: oklch(74.8% 0.26 342.55);
      --secondary-content: oklch(100% 0 0);
      --accent: oklch(74.51% 0.167 183.61);
      --neutral: oklch(20% 0.02 285);
      --base-100: oklch(20% 0.02 285);
      --base-200: oklch(17% 0.02 285);
      --base-300: oklch(14% 0.02 285);
      --base-content: oklch(87% 0.02 285);
    }
    
    /* Code styling */
    code, pre, .monaco-editor {
      font-family: var(--code-font-family) !important;
      font-variant-ligatures: var(--font-ligatures) !important;
    }
    
    /* Hide elements based on display mode */
    .display-mode .edit-mode-hide { display: block !important; }
    .display-mode .display-mode-hide { display: none !important; }
    .edit-mode .edit-mode-hide { display: none !important; }
    .edit-mode .display-mode-hide { display: block !important; }
    
    /* Smooth transitions */
    .btn, .card, .input, .select, .dropdown-content {
      transition: all 0.2s ease-in-out;
    }
    
    /* Custom scrollbar for webkit browsers */
    ::-webkit-scrollbar {
      width: 8px;
      height: 8px;
    }
    
    ::-webkit-scrollbar-track {
      background: oklch(var(--b2));
    }
    
    ::-webkit-scrollbar-thumb {
      background: oklch(var(--bc) / 0.2);
      border-radius: 4px;
    }
    
    ::-webkit-scrollbar-thumb:hover {
      background: oklch(var(--bc) / 0.3);
    }
    
    {% if not isIE(handler.request.headers['user-agent']) and not handler.session.legacy %}
      #panel { display: flex; flex-direction: column; }
    {% endif %}
  </style>
  <!-- DaisyUI and Tailwind CSS -->
  <link href="https://cdn.jsdelivr.net/npm/daisyui@4.12.10/dist/full.min.css" rel="stylesheet" type="text/css" />
  <script src="https://cdn.tailwindcss.com"></script>
  
  {% if process.env.DEV %}
    <script src="/default.theme.js?version={{ global.Hydro.version['ui-default'] }}"></script>
    <link rel="stylesheet" media="all" href="/theme.css?version={{ global.Hydro.version['ui-default'] }}">
  {% else %}
    <link rel="stylesheet" media="all" href="{{ UiContext.cdn_prefix }}theme-{{ global.Hydro.version['ui-default'] }}.css">
  {% endif %}
  {% if not isIE(handler.request.headers['user-agent']) and not handler.session.legacy %}
    <script>
      var _htmlNode = document.documentElement;
      _htmlNode.className = _htmlNode.className.replace(' nojs', ' hasjs');
      window.UiContext = '{{ UiContext|json|jsesc|safe }}';
      window.UserContext = '{{ UserContext|json|jsesc|safe }}';
    </script>
  {% endif %}
  {% set UiContext = Object.create(UiContext) %}
  {% set UserContext = Object.create(UserContext) %}
</head>
<body>
  {% if not isIE(handler.request.headers['user-agent']) and not handler.session.legacy %}
    <script type="text/javascript" src="/resource/{{ UiContext.constantVersion }}/entry.js"></script>
    <script type="text/javascript" src="{{ UiContext.cdn_prefix }}resource/{{ global.Hydro.version['ui-default'] }}/lang-{{ _('__id') }}.js"></script>
    <script type="text/javascript" src="{{ UiContext.cdn_prefix }}hydro-{{ global.Hydro.version['ui-default'] }}.js{% if process.env.DEV %}?version=dev{% endif %}"></script>
  {% endif %}
  {% block body %}{% endblock %}
  {% block script %}{% endblock %}
  {% if not isIE(handler.request.headers['user-agent']) and not handler.session.legacy %}
    <script>
      window.UiContextNew = '{{ UiContext|json|jsesc|safe }}';
      window.UserContextNew = '{{ UserContext|json|jsesc|safe }}';
    </script>
  {% endif %}
</body>
</html>
