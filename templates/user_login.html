{% extends "layout/immersive.html" %}
{% block content %}
<div class="hero min-h-screen bg-base-200">
  <div class="hero-content flex-col lg:flex-row-reverse">
    <div class="text-center lg:text-left">
      <h1 class="text-5xl font-bold">{{ _('Welcome Back!') }}</h1>
      <p class="py-6">{{ _('Please sign in to your account to continue.') }}</p>
    </div>
    <div class="card flex-shrink-0 w-full max-w-sm shadow-2xl bg-base-100">
      <div class="card-body">
        <h2 class="card-title justify-center text-2xl mb-6">{{ _('Login') }}</h2>
        <form method="POST" class="space-y-4">
          {% if model.system.get('server.login') %}
            <div class="form-control">
              <label class="label">
                <span class="label-text">{{ _('Username') }}</span>
              </label>
              <input 
                name="uname" 
                type="text" 
                placeholder="{{ _('Enter your username') }}"
                class="input input-bordered" 
                autofocus 
                autocomplete="username webauthn"
                required
              />
            </div>
            
            <div class="form-control">
              <label class="label">
                <span class="label-text">{{ _('Password') }}</span>
              </label>
              <input 
                name="password" 
                type="password" 
                placeholder="{{ _('Enter your password') }}"
                class="input input-bordered" 
                required
              />
            </div>
            
            <div class="form-control">
              <label class="label cursor-pointer justify-start gap-3">
                <input type="checkbox" name="rememberme" class="checkbox checkbox-primary" />
                <span class="label-text">{{ _('Remember me') }}</span>
              </label>
            </div>
            
            <div class="form-control mt-6">
              <input type="hidden" name="tfa" value="">
              <input type="hidden" name="authnChallenge" value="">
              <button type="submit" name="login_submit" class="btn btn-primary w-full">
                {{ _('Login') }}
              </button>
            </div>
          {% endif %}
          
          <!-- OAuth Providers -->
          {%- for v in handler.loginMethods -%}
            <div class="form-control">
              <a href="{{ url('user_oauth', type=v.id) }}" class="btn btn-outline w-full">
                {{ _(v.text) }}
              </a>
            </div>
          {%- endfor -%}
          
          <div class="divider"></div>
          
          <div class="text-center">
            <a href="{{ url('user_lostpass') }}" class="link link-primary text-sm">
              {{ _('Forgot password or username?') }}
            </a>
          </div>
          
          {% if handler.user.hasPriv(PRIV.PRIV_REGISTER_USER) and model.system.get('server.login') %}
            <div class="text-center">
              <span class="text-sm">{{ _("Don't have an account?") }}</span>
              <a href="{{ url('user_register') }}" class="link link-primary text-sm font-medium">
                {{ _('Sign Up') }}
              </a>
            </div>
          {% endif %}
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
